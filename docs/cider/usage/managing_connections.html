<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Managing Connections :: CIDER</title>
    <link rel="canonical" href="https://cider.mx/cider/usage/managing_connections.html">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140176314-1"></script>
    <script>dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-140176314-1')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://cider.mx">CIDER</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider">CIDER</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider-nrepl">CIDER nREPL</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/orchard">Orchard</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/clojure-mode">clojure-mode</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/cider/about/support.html">Support</a>
            <a class="navbar-item" href="/cider/contributing.html">Contributing</a>
            <a class="navbar-item" href="https://opencollective.com/cider">Open Collective</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="cider" data-version="master">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">CIDER</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/up_and_running.html">Up and Running</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/clojurescript.html">ClojureScript</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Using CIDER</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="interactive_programming.html">Interactive Programming</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cider_mode.html">cider-mode</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="managing_connections.html">Managing Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="code_completion.html">Code Completion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pretty_printing.html">Pretty Printing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="navigating_stacktraces.html">Navigating Stacktraces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="misc_features.html">Misc Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/running_tests.html">Running Tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/test_reports.html">Test Reports</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/supported_libraries.html">Supported Libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Debugging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/tracing.html">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/enlighten.html">Enlighten</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/debugger.html">Debugger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/misc.html">Misc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/basic_config.html">Basic Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/syntax_highlighting.html">Syntax Highlighting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/indentation.html">Indentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eldoc.html">Eldoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/misc.html">Misc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../indent_spec.html">Indentation Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Using the REPL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/basic_usage.html">Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/keybindings.html">Keybindings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/history.html">REPL History</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../caveats.html">Caveats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_packages.html">Additional Packages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_resources.html">Additional Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../contributing.html">Contributing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/docs.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/hacking.html">Hacking on CIDER</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/funding.html">Funding</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">About</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/history.html">History</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/team.html">Team</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/release_policy.html">Release Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/logo.html">Logo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/license.html">License</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">CIDER</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">CIDER</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">CIDER</a></li>
    <li class="crumb">Using CIDER</li>
    <li class="crumb"><a href="managing_connections.html">Managing Connections</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/clojure-emacs/cider/edit/master/doc/modules/ROOT/pages/usage/managing_connections.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Managing Connections</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because connections map one-to-one to REPL buffers, for the purpose of this
section we use "REPL" and "connection" interchangeably.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sessions"><a class="anchor" href="#_sessions"></a>Sessions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CIDER maintains a grouped view of opened nREPL connections through <a href="https://github.com/vspinu/sesman">Sesman</a>
sessions. Each session is a collection of connections which share the same nREPL
server.</p>
</div>
<div class="paragraph">
<p>Start new sessions with</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>C-c C-x j j</kbd> <code>cider-jack-in-clj</code></p>
</li>
<li>
<p><kbd>C-c C-x j s</kbd> <code>cider-jack-in-cljs</code></p>
</li>
<li>
<p><kbd>C-c C-x j m</kbd> <code>cider-jack-in-clj&amp;cljs</code></p>
</li>
<li>
<p><kbd>C-c C-x c j</kbd> <code>cider-connect-clj</code></p>
</li>
<li>
<p><kbd>C-c C-x c s</kbd> <code>cider-connect-cljs</code></p>
</li>
<li>
<p><kbd>C-c C-x c m</kbd> <code>cider-connect-clj&amp;cljs</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Add new REPLs to the current session with</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>C-c C-x s j</kbd> <code>cider-connect-sibling-clj</code></p>
</li>
<li>
<p><kbd>C-c C-x s s</kbd> <code>cider-connect-sibling-cljs</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Session life-cycle management commands live on the <a href="https://github.com/vspinu/sesman">Sesman</a> map (<kbd>C-c C-s</kbd>)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>C-c C-s s</kbd> <code>sesman-start</code></p>
</li>
<li>
<p><kbd>C-c C-s r</kbd> <code>sesman-restart</code></p>
</li>
<li>
<p><kbd>C-c C-s q</kbd> <code>sesman-quit</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command <code>sesman-start</code> wraps around all of the aforementioned <code>jack-in</code> and
<code>connect</code> commands. You can also invoke same functionality with <kbd>M-x</kbd>
<code>cider</code> or <kbd>C-c M-x</kbd>.</p>
</div>
<div class="paragraph">
<p>To quit or restart individual connections use cider commands</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>C-c C-q</kbd> <code>cider-quit</code></p>
</li>
<li>
<p><kbd>C-c M-r</kbd> <code>cider-restart</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_context_links"><a class="anchor" href="#_context_links"></a>Context Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sessions can be linked to contexts (projects, directories and buffers)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>C-c C-s b</kbd> <code>sesman-link-with-buffer</code></p>
</li>
<li>
<p><kbd>C-c C-s d</kbd> <code>sesman-link-with-directory</code></p>
</li>
<li>
<p><kbd>C-c C-s p</kbd> <code>sesman-link-with-project</code></p>
</li>
<li>
<p><kbd>C-c C-s u</kbd> <code>sesman-unlink</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_friendly_sessions"><a class="anchor" href="#_friendly_sessions"></a>Friendly Sessions</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/vspinu/sesman">Sesman</a> defines "friendly" session to allow for on-the-fly operation on
sessions from contexts where there are no explicit links. In CIDER friendly
sessions are defined by the project dependencies. For example when you use
<code>cider-find-var</code> (<kbd>M-.</kbd>) to navigate to a var definition in a
dependency project the current project&#8217;s session becomes a friendly session for
the dependency.</p>
</div>
<div class="paragraph">
<p>When you evaluate some code from a dependency project and there are no explicit
links in that project, the most recent friendly session is used to evaluate the
code. Explicitly linked sessions have precedence over the friendly sessions.</p>
</div>
<div class="paragraph">
<p>You can disable friendly session inference by customizing
<code>sesman-use-friendly-sessions</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_displaying_session_info"><a class="anchor" href="#_displaying_session_info"></a>Displaying Session Info</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Get info on all linked and friendly sessions in the current context with
<kbd>C-c C-s i</kbd> (<code>sesman-info</code>). On <kbd>C-u</kbd>, display info on all
CIDER sessions. For the connection specific information use CIDER&#8217;s built-in
<code>cider-describe-connection</code> (<kbd>C-c M-d</kbd>).</p>
</div>
<div class="paragraph">
<p>An interactive view of all CIDER sessions is available through the
<code>sesman-browser</code> (<kbd>C-c C-s w</kbd>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_current_session"><a class="anchor" href="#_current_session"></a>Current Session</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All CIDER commands (evaluation, completion, switching to REPL etc.) operate on
the relevant REPL within the current session. The current session is the most
relevant session among all linked session (or friendly sessions when no links
exist). Session relevance is decided by the specificity of the linked contexts
and recency of the REPL buffers.</p>
</div>
<div class="paragraph">
<p>If the current context is linked to a single session then that session is the
current one. If multiple sessions are linked to a context (say, a project) then
the current session is the one containing the most recently viewed REPL.</p>
</div>
<div class="paragraph">
<p>Links to more specific contexts have precedence. For example, if you have two
sessions linked to the same project and another to a directory within that
project, then the session linked to the directory is the current session. Thus,
again, there is no ambiguity.</p>
</div>
<div class="paragraph">
<p>By default <a href="https://github.com/vspinu/sesman">Sesman</a> allows multiple simultaneous links to projects and
directories, but only one link per buffer. See <code>sesman-single-link-contexts</code> if
you would like to change that.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_current_repl"><a class="anchor" href="#_current_repl"></a>Current REPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The current REPL is the most relevant REPL from the current session. REPL relevance
is determined by the type of the current buffer. For example if the current
buffer is a <code>clj</code> buffer then a <code>clj</code> REPL is selected. Ambiguous situations could
arise when, for instance, there are multiple <code>clj</code> REPLs within a session, or
the current buffer is a <code>cljc</code> buffer and both <code>clj</code> and <code>cljs</code> REPLs exist in
the session. In such cases the current REPL is the most recently viewed REPL of
the relevant type.</p>
</div>
<div class="paragraph">
<p>Switch to the current REPL buffer with <kbd>C-c C-z</kbd>. You can then use the
same key combination to switch back to the Clojure(Script) buffer that you came
from.</p>
</div>
<div class="paragraph">
<p>The single prefix <kbd>C-u C-c C-z</kbd>, will switch to the current REPL buffer
and set the namespace in that buffer based on namespace in the current
Clojure(Script) buffer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customizing_session_and_repl_names"><a class="anchor" href="#_customizing_session_and_repl_names"></a>Customizing Session and REPL Names</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default session names consist of abbreviated project name, host and port
(e.g. <code>project/dir:localhost:1234</code>). REPL buffer name consist of the session
name and the REPL type specification post-fix
(e.g. <code><strong>project/dir:localhost:1234(cljs:node)</strong></code>).</p>
</div>
<div class="paragraph">
<p>You can customize session names with <code>cider-session-name-template</code> and REPL
names with <code>nrepl-repl-buffer-name-template</code>. See also
<code>cider-format-connection-params</code> for available formats.</p>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
