<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pretty-printing :: CIDER</title>
    <link rel="canonical" href="https://cider.mx/cider/usage/pretty_printing.html">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140176314-1"></script>
    <script>dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-140176314-1')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://cider.mx">CIDER</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider">CIDER</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider-nrepl">CIDER nREPL</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/orchard">Orchard</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/clojure-mode">clojure-mode</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/cider/about/support.html">Support</a>
            <a class="navbar-item" href="/cider/contributing.html">Contributing</a>
            <a class="navbar-item" href="https://opencollective.com/cider">Open Collective</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="cider" data-version="master">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">CIDER</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/up_and_running.html">Up and Running</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/clojurescript.html">ClojureScript</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Using CIDER</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="interactive_programming.html">Interactive Programming</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cider_mode.html">cider-mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managing_connections.html">Managing Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="code_completion.html">Code Completion</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="pretty_printing.html">Pretty Printing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="navigating_stacktraces.html">Navigating Stacktraces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="misc_features.html">Misc Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/running_tests.html">Running Tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/test_reports.html">Test Reports</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/supported_libraries.html">Supported Libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Debugging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/tracing.html">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/enlighten.html">Enlighten</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/debugger.html">Debugger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/misc.html">Misc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/basic_config.html">Basic Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/syntax_highlighting.html">Syntax Highlighting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/indentation.html">Indentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eldoc.html">Eldoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/misc.html">Misc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../indent_spec.html">Indentation Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Using the REPL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/basic_usage.html">Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/keybindings.html">Keybindings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/history.html">REPL History</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../caveats.html">Caveats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_packages.html">Additional Packages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_resources.html">Additional Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../contributing.html">Contributing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/docs.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/hacking.html">Hacking on CIDER</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/funding.html">Funding</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">About</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/history.html">History</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/team.html">Team</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/release_policy.html">Release Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/logo.html">Logo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/license.html">License</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">CIDER</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">CIDER</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">CIDER</a></li>
    <li class="crumb">Using CIDER</li>
    <li class="crumb"><a href="pretty_printing.html">Pretty Printing</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/clojure-emacs/cider/edit/master/doc/modules/ROOT/pages/usage/pretty_printing.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Pretty-printing</h1>
<div class="sect1">
<h2 id="_configuring_a_printing_function"><a class="anchor" href="#_configuring_a_printing_function"></a>Configuring a printing function</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Pretty-printing was overhauled in CIDER 0.21 to leverage new features introduced in nREPL 0.6.
Refer to <a href="https://nrepl.org/nrepl/usage/misc.html#_pretty_printing">nREPL&#8217;s documentation</a> for details.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the function used by CIDER for pretty-printing evaluation
results and other data using the option <code>cider-print-fn</code>, which can take the
following possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>nil</code> to defer to nREPL to choose the printing function. This will use the
bound value of <code>nrepl.middleware.print/<strong>print-fn</strong></code>, which defaults to the
equivalent of <code>clojure.core/pr</code>.</p>
</li>
<li>
<p><code>pr</code> to use the equivalent of \=<code>clojure.core/pr\\=</code>.</p>
</li>
<li>
<p><code>pprint</code> to use the built-in <code>clojure.pprint/pprint</code> (this is the default).</p>
</li>
<li>
<p><code>fipp</code> to use the <a href="https://github.com/brandonbloom/fipp">Fast Idiomatic
Pretty-Printer</a>. This is approximately
5-10x faster than <code>clojure.core/pprint</code>.</p>
</li>
<li>
<p><code>puget</code> to use <a href="https://github.com/greglook/puget">Puget</a>, which provides
<a href="https://github.com/greglook/puget#canonical-representation">canonical serialization</a>
of data on top of fipp, but at a slight performance cost.</p>
</li>
<li>
<p><code>zprint</code> to use <a href="https://github.com/kkinnear/zprint">zprint</a>, a fast and
flexible alternative to the libraries mentioned above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatively, <code>cider-print-fn</code> can be set to the namespace-qualified name of a
Clojure var whose function takes three arguments: the object to print, the
<code>java.io.PrintWriter</code> to print on, and a (possibly nil) map of options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-el hljs" data-lang="el">(setq cider-print-fn "user/my-pprint")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s one example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">(ns cider.pprint
  (:require
   [clojure.pprint :as pp]))

(defn pprint
  "A simple wrapper around `clojure.pprint/write`.

  Its signature is compatible with the expectations of nREPL's wrap-print
  middleware."
  [value writer options]
  (apply pp/write value (mapcat identity (assoc options :stream writer))))</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limiting_printed_output"><a class="anchor" href="#_limiting_printed_output"></a>Limiting printed output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can set <code>cider-print-quota</code> to limit the number of bytes that will be
returned by any printing operation. This defaults to one megabyte, and can be
set to <code>nil</code> if no limit is desired. Note well that if no quota is set some
printing operations may never terminate&#8201;&#8212;&#8201;you can still use <code>cider-interrupt</code> to
halt them.</p>
</div>
<div class="paragraph">
<p>Your configured printing function might also support limiting the length and
depth of printed objects&#8201;&#8212;&#8201;either using <code>clojure.core/<strong>print-length</strong></code> and
<code>clojure.core/<strong>print-level</strong></code> or in the provided <a href="#print-options">options map</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_print_options"><a class="anchor" href="#_print_options"></a>Print options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can pass an options map to the print function by setting <code>cider-print-options</code>. Here&#8217;s an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-el hljs" data-lang="el">(setq cider-print-options '(dict "length" 50 "right-margin" 70))</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Each print engine has its own configuration options, so you&#8217;ll have to be sure to set <code>cider-print-options</code> accordingly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here&#8217;s a table describing the differences in the names for the most common print
options supported by every print engine.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>clojure.core/pr</code></th>
<th class="tableblock halign-left valign-top"><code>clojure.pprint</code></th>
<th class="tableblock halign-left valign-top">Fipp &amp; Puget</th>
<th class="tableblock halign-left valign-top">zprint</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clojure.core/<strong>print-length</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>print-length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max-length</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clojure.core/<strong>print-level</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>print-level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max-depth</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clojure.pprint/<strong>print-right-margin</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>right-margin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>width</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Not all printing engines use (or default to) the dynamic variables in all cases,
so setting them at the REPL may or may not have the intended effect. See the
respective documentation of each engine:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>clojure.core/pr</code>: <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/" class="bare">https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/</a><em>print-dup</em></p>
</li>
<li>
<p><code>clojure.pprint</code>: <a href="https://clojuredocs.org/clojure.pprint/write" class="bare">https://clojuredocs.org/clojure.pprint/write</a></p>
</li>
<li>
<p>Fipp: <a href="https://github.com/brandonbloom/fipp/#printer-usage" class="bare">https://github.com/brandonbloom/fipp/#printer-usage</a></p>
</li>
<li>
<p>Puget: <a href="https://github.com/greglook/puget#usage" class="bare">https://github.com/greglook/puget#usage</a></p>
</li>
<li>
<p>zprint: <a href="https://github.com/kkinnear/zprint/#what-is-configurable" class="bare">https://github.com/kkinnear/zprint/#what-is-configurable</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_width_of_printed_output"><a class="anchor" href="#_width_of_printed_output"></a>Width of printed output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you&#8217;re using one of the printing engines provided with CIDER, the value of
<code>fill-column</code> will be used for the relevant width option in the <a href="#print-options">options
map</a>. You can override this by hardcoding the relevant option in
<code>cider-print-options</code>.</p>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
