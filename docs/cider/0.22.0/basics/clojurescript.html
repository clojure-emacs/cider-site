<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ClojureScript :: CIDER Docs</title>
    <link rel="canonical" href="https://docs.cider.mx/cider/basics/clojurescript.html">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140176314-1"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-140176314-1')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://cider.mx">CIDER</a>
        <span class="separator">//</span>
        <a href="https://docs.cider.mx">Docs</a>
      </div>
      <div class="navbar-item">
        <input id="search-input" type="text" placeholder="Search docs">
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider">CIDER</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider-nrepl">CIDER nREPL</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/orchard">Orchard</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/clojure-mode">clojure-mode</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/cider/about/support.html">Support</a>
            <a class="navbar-item" href="/cider/contributing.html">Contributing</a>
            <a class="navbar-item" href="https://opencollective.com/cider">Open Collective</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="cider" data-version="0.22.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">CIDER</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="up_and_running.html">Up and Running</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="middleware_setup.html">nREPL Middleware Setup</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="clojurescript.html">ClojureScript</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Using CIDER</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/interactive_programming.html">Interactive Programming</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/cider_mode.html">Using cider-mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/managing_connections.html">Managing Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/code_completion.html">Code Completion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/pretty_printing.html">Pretty Printing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/navigating_stacktraces.html">Navigating Stacktraces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/misc_features.html">Misc Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/running_tests.html">Running Tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/test_reports.html">Test Reports</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/supported_libraries.html">Supported Libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Debugging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/tracing.html">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/enlighten.html">Enlighten</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/debugger.html">Debugger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/misc.html">Misc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/basic_config.html">Basic Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/syntax_highlighting.html">Syntax Highlighting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/indentation.html">Indentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eldoc.html">Eldoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/misc.html">Misc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../indent_spec.html">Indentation Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Using the REPL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/basic_usage.html">Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/keybindings.html">Keybindings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repl/history.html">REPL History</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../caveats.html">Caveats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_packages.html">Additional Packages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_resources.html">Additional Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../contributing.html">Contributing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/docs.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/hacking.html">Hacking on CIDER</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/funding.html">Funding</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">About</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/history.html">History</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/team.html">Team</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/release_policy.html">Release Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/logo.html">Logo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/license.html">License</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">CIDER</span>
    <span class="version">0.22.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">CIDER</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">0.22.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">CIDER nREPL</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../cider-nrepl/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">CIDER</a></li>
    <li>Getting Started</li>
    <li><a href="clojurescript.html">ClojureScript</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.22.0</button>
  <div class="version-menu">
    <a class="version" href="../../basics/clojurescript.html">master</a>
    <a class="version is-current" href="clojurescript.html">0.22.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/clojure-emacs/cider/blob/v0.22.0/doc/modules/ROOT/pages/basics/clojurescript.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1 class="page">ClojureScript</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
CIDER works well with ClojureScript, but not all CIDER features are
available in ClojureScript (yet). For instance, the test runner and
debugger are currently Clojure-only features.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Unlike the Clojure ecosystem that is dominated by Leiningen and Boot, the
ClojureScript ecosystem has a number of different choices for REPLs. You&#8217;ll have
to decide which one you want to run and how you want CIDER to interact
with it. This chapter describes some of the more common choices and the
configurations required to get them working.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_piggieback"><a class="anchor" href="#_piggieback"></a>Piggieback</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ClojureScript support relies on the <a href="https://github.com/nrepl/piggieback">piggieback</a> nREPL middleware
being present in your REPL session. There&#8217;s one exception to this,
though: <a href="https://github.com/thheller/shadow-cljs">shadow-cljs</a>. It has its own nREPL middleware and doesn&#8217;t rely
on piggieback at all.</p>
</div>
<div class="paragraph">
<p>If <code>cider-inject-dependencies-at-jack-in</code> is enabled, which it is by
default, then piggieback will be automatically added and configured
for your project when doing <code>cider-jack-in-cljs</code>.</p>
</div>
<div class="paragraph">
<p>If <code>cider-inject-dependencies-at-jack-in</code> is disabled or you&#8217;re going
to connect to an already running nREPL server using
<code>cider-connect-cljs</code>, use the configuration in the following section.</p>
</div>
<div class="sect2">
<h3 id="_manual_piggieback_setup"><a class="anchor" href="#_manual_piggieback_setup"></a>Manual Piggieback Setup</h3>
<div class="paragraph">
<p>To setup piggieback, add the following dependencies to your project
(<code>project.clj</code> in a Leiningen based project or <code>build.boot</code> in a Boot
project):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">;; use whatever are the most recent versions here
[cider/piggieback "0.4.1"]
[org.clojure/clojure "1.9.0"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>as well as <code>piggieback</code> nREPL middleware:</p>
</div>
<div class="paragraph">
<p>in <code>project.clj</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">:repl-options {:nrepl-middleware [cider.piggieback/wrap-cljs-repl]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or in <code>build.boot</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">(task-options!
  repl {:middleware '[cider.piggieback/wrap-cljs-repl]})</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_a_clojurescript_repl"><a class="anchor" href="#_starting_a_clojurescript_repl"></a>Starting a ClojureScript REPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Open a file in your project and type <kbd>M-x</kbd>
<code>cider-jack-in-cljs</code> <kbd>RET</kbd>. This will start up the nREPL
server and create a ClojureScript REPL buffer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Prior to CIDER 0.18, <code>cider-jack-in-cljs</code> would create both a Clojure and
a ClojureScript REPL. In CIDER 0.18+ if you want to create both REPLs
you&#8217;ll have to use <code>cider-jack-in-clj&amp;cljs</code> instead.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When you have a combination of Clojure and ClojureScript REPLs, CIDER
will automatically direct all the usual CIDER commands to the
appropriate REPL based on whether you&#8217;re currently visitng a <code>.clj</code> or
<code>.cljs</code> file.</p>
</div>
<div class="paragraph">
<p><code>cider-jack-in-cljs</code> will prompt you for the type of ClojureScript
REPL you want to start. Keep in mind that some of the REPLs will
require you to configure additional setup. For example, you&#8217;ll need to
have Node.js installed to be able to start a Node REPL.</p>
</div>
<div class="paragraph">
<p>If you frequently use the same ClojureScript REPL, you can set
<code>cider-default-cljs-repl</code> and CIDER will skip the prompt and use this
instead. For example, the following will make Nashorn the default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-default-cljs-repl 'nashorn)</code></pre>
</div>
</div>
<div class="paragraph">
<p>All supported ClojureScript REPLs are stored in
<code>cider-cljs-repl-types</code>. If you need to extend it, you should use
<code>cider-register-cljs-repl-type</code> in your Emacs configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(cider-register-cljs-repl-type 'super-cljs "(do (...))" optional-requirements-function)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also modify the known ClojureScript REPLs on a per-project basis using
<code>.dir-locals.el</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">;; replace the list of REPLs types and set some default
((nil
  (cider-default-cljs-repl . super-cljs)
  (cider-cljs-repl-types . ((super-cljs "(do (foo) (bar))")))))</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">;; modify the list of known REPLs and set some default
((nil
  (eval . (cider-register-cljs-repl-type 'super-cljs "(do (foo) (bar))"))
  (cider-default-cljs-repl . super-cljs)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you already have a Clojure REPL running and want to add a
ClojureScript REPL, you can invoke
<code>cider-jack-in-sibling-clojurescript</code> to add it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_a_clojurescript_repl"><a class="anchor" href="#_setting_up_a_clojurescript_repl"></a>Setting up a ClojureScript REPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections describe the configurations for several common
CloudScript REPL use cases.</p>
</div>
<div class="sect2">
<h3 id="_browser_connected_clojurescript_repl"><a class="anchor" href="#_browser_connected_clojurescript_repl"></a>Browser-Connected ClojureScript REPL</h3>
<div class="paragraph">
<p>Using Weasel, you can also have a browser-connected REPL.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>[weasel "0.7.0"]</code> to your project&#8217;s <code>:dependencies</code>.</p>
</li>
<li>
<p>Type <kbd>M-x</kbd> <code>cider-jack-in-cljs</code> <kbd>RET</kbd> and choose
the <code>Weasel</code> option when prompted about the ClojureScript REPL type you want
to use.</p>
</li>
<li>
<p>Add this to your ClojureScript code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">(ns my.cljs.core
  (:require [weasel.repl :as repl]))
(repl/connect "ws://localhost:9001")</code></pre>
</div>
</div>
</li>
<li>
<p>Open a file in your project and type <kbd>M-x</kbd> <code>cider-jack-in-cljs</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Provided that a Piggieback-enabled ClojureScript environment is active in your
REPL session, code loading and evaluation will work seamlessly regardless of the
presence of the <code>cider-nrepl</code> middleware. If the middleware is present then most
other features of CIDER will also be enabled (including code completion,
documentation lookup, the namespace browser, and macroexpansion).</p>
</div>
</div>
<div class="sect2">
<h3 id="_browser_connected_clojurescript_repl_in_boot_projects"><a class="anchor" href="#_browser_connected_clojurescript_repl_in_boot_projects"></a>Browser-Connected ClojureScript REPL in Boot Projects</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add this to your dependencies in <code>build.boot</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">[adzerk/boot-cljs        "X.Y.Z"  :scope "test"]
[adzerk/boot-cljs-repl   "X.Y.Z"  :scope "test"]
[pandeiro/boot-http      "X.Y.Z"  :scope "test"]
[weasel                  "0.7.0"  :scope "test"]
[cider/piggieback "0.4.1"  :scope "test"] ; not needed for cider-jack-in-cljs</code></pre>
</div>
</div>
<div class="paragraph">
<p>and this at the end of <code>build.boot</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">(require
 '[adzerk.boot-cljs :refer [cljs]]
 '[adzerk.boot-cljs-repl :refer [cljs-repl]]
 '[pandeiro.boot-http :refer [serve]])

(deftask dev []
  (comp (serve)
        (watch)
        (cljs-repl) ; order is important!!
        (cljs)))</code></pre>
</div>
</div>
</li>
<li>
<p>Type <kbd>M-x</kbd> <code>customize-variable</code> <kbd>RET</kbd> <code>cider-boot-parameters</code>
and insert <code>dev</code>.</p>
</li>
<li>
<p>Open a file in your project and type <kbd>M-x</kbd> <code>cider-jack-in-cljs</code>.</p>
</li>
<li>
<p>Connect to the running server with your browser. The address is printed on the terminal, but it&#8217;s probably <code>http://localhost:3000</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information visit <a href="https://github.com/adzerk-oss/boot-cljs-repl">boot-cljs-repl</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_figwheel_leiningen_only"><a class="anchor" href="#_using_figwheel_leiningen_only"></a>Using Figwheel (Leiningen-only)</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This has been deprecated in favour of using <code>figwheel-main</code>. Check out
the instructions in the next section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also use <a href="https://github.com/bhauman/lein-figwheel">Figwheel</a> with CIDER.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set up Figwheel as normal, but make sure <code>:cljsbuild</code> and <code>:figwheel</code> settings are
in the root of your Leiningen project definition.</p>
</li>
<li>
<p>Add these to your dev <code>:dependencies</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">[cider/piggieback "0.4.1"] ; not needed for cider-jack-in-cljs
[figwheel-sidecar "0.5.19"] ; use here whatever the current version of figwheel is</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Keep in mind that CIDER does not support versions versions of Piggieback older than 0.4. Make sure that you use a compatible version of Figwheel.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add this to your dev <code>:repl-options</code> (not needed for <code>cider-jack-in-cljs</code>):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">:nrepl-middleware [cider.piggieback/wrap-cljs-repl]</code></pre>
</div>
</div>
</li>
<li>
<p>Start the REPL with <code>cider-jack-in-cljs</code> (<kbd>C-c C-x (C-)j (C-)s</kbd>). Select
<code>figwheel</code> when prompted for the ClojureScript REPL type.</p>
</li>
<li>
<p>Open a browser to the Figwheel URL so that it can connect to your application.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You should also check out
<a href="https://github.com/bhauman/lein-figwheel/wiki/Using-the-Figwheel-REPL-within-NRepl">Figwheel&#8217;s wiki</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_figwheel_main"><a class="anchor" href="#_using_figwheel_main"></a>Using Figwheel-main</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The instructions here assume you&#8217;re using Leiningen. Adapting
them to your favourite build tool is up to you.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also use <a href="https://github.com/bhauman/figwheel-main">Figwheel-main</a> with CIDER.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add this to your dev <code>:dependencies</code> (not needed for <code>cider-jack-in-cljs</code>):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">[cider/piggieback "0.4.1"]</code></pre>
</div>
</div>
</li>
<li>
<p>Add this to your dev <code>:repl-options</code> (not needed for <code>cider-jack-in-cljs</code>):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">:nrepl-middleware [cider.piggieback/wrap-cljs-repl]</code></pre>
</div>
</div>
</li>
<li>
<p>Start the REPL with <code>cider-jack-in-cljs</code> (<kbd>C-c C-x (C-)j (C-)s</kbd>). When CIDER prompts about the ClojureScript REPL type,
type <code>figwheel-main</code>.</p>
</li>
<li>
<p>Select the Figwheel build to run when prompted for it. (e.g. <code>:dev</code>).</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_using_shadow_cljs"><a class="anchor" href="#_using_shadow_cljs"></a>Using shadow-cljs</h3>
<div class="paragraph">
<p>Provided you&#8217;ve configured your project correctly, you can simply use
<code>cider-jack-in-cljs</code> for <code>shadow-cljs</code>.</p>
</div>
<div class="paragraph">
<p>This will automatically start the shadow-cljs server and connect to
it. You&#8217;ll also be prompted for the build to use.</p>
</div>
<div class="paragraph">
<p>Alternatively you can start the server manually with something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">$ npx shadow-cljs server</code></pre>
</div>
</div>
<div class="paragraph">
<p>And connect to it with <code>cider-connect</code>.</p>
</div>
<div class="paragraph">
<p>If you already have a running server watching a build (for instance
you have already run <code>npx shadow-cljs watch :dev</code>), you can use the
<code>shadow-select</code> CLJS REPL and specify <code>:dev</code> when prompted.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_working_with_cljc_files"><a class="anchor" href="#_working_with_cljc_files"></a>Working with <code>.cljc</code> files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ordinarily, CIDER dispatches code from <code>clj</code> files to Clojure REPLs
and <code>cljs</code> files to ClojureScript REPLs. But<code>cljc</code> files have two
possible connection targets, both of which are valid. So, by default,
CIDER tries to evaluate <code>cljc</code> files in all matching connection
buffers, both <code>clj</code> and <code>cljs</code>, if present.</p>
</div>
<div class="paragraph">
<p>Thus, if you&#8217;re evaluating the code <code>(+ 2 2)</code> in a <code>cljc</code> file and you
have both an active Clojure and ClojureScript REPL then the code is
going to be evaluated twice, once in each of the REPLs.  In fact, you
can create multiple clj and cljs sibling connections (<kbd>C-c C-x C-s C-s/j</kbd>) within a CIDER session and evaluation will be directed
into all REPLs simultaneously. See <a href="../usage/managing_connections.html" class="page">Managing
Connections</a> for more details.</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>Copyright (C) 2012-2019 <a href="https://metaredux.com">Bozhidar Batsov</a> and <a href="https://cider.mx">CIDER</a> contributors.</p>
</footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: '1f3d78fd63fcb687dcc1312aab02a2de',
  indexName: 'cider',
  inputSelector: '#search-input',
  algoliaOptions: { 'facetFilters': ["version:0.22.0"] },
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
